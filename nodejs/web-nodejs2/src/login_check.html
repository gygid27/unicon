<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <!--jquery-->
        <script
            src="https://code.jquery.com/jquery-3.7.0.js"
            integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM="
            crossorigin="anonymous"
        ></script>
        <script src="./src/func.js">

            // parse = function (href) {
            //     //url이라는 객체의 prototype에 등록 url의 원본 객체  parse 추가한다.
            //     var tmp = href.split('?')[1];
            //     var obj = new Object();
            //     $.each(tmp.split('&'), function (i, t) {
            //         var param = t.split('=');
            //         obj[param[0]] = param[1];
            //     });
            //     console.log(obj);
            //     return obj;
            // };
            // //주소에 보면 가끔 %23454242244%32343%43 이렇게 표시되는 경우는
            // //다시 특수문자로 변경하려면 =>decode
            // //decodeURI / decodeURIComponent
            // $.getJSON('./data/member.json', function (member) {
            //     var href = decodeURIComponent(location.href);
            //     var query = parse(href);
            //     console.log(member);

            //     var isSuccess = false;
            //     $.each(member, function (i, m) {
            //         if (m.sdmId === query.sdmId) {
            //             if (m.sdmPw === query.sdmPw) {
            //                 isSuccess = true;
            //             }
            //         }
            //     });
            //     if (isSuccess) document.write('로그인성공');
            //     else document.write('로그인실패');
            // });

            // function getCookie(name) {
            //     var cookies = document.cookie.split(';');
            //     for (var i in cookies) {
            //         var cookie = cookies[i].trim();
            //         //trim은 공백제거
            //         if (cookie.startsWith(name + '=')) {
            //             return cookie.substring(name.length + 1, cookie.length);
            //         }
            //     }
            //     return '';
            // }
            // import getCookie from './src/fun.js';
            // var isLogin = getCookie('isLogin');
            // var id = getCookie('id');

            // document.write(isLogin + ' ' + id);
        </script>
        <script>
            $(function () {
                var isLogin = getCookie('isLogin');
                var id = getCookie('id');
                if (isLogin == 'false') {
                    $('#login_result').append('<h2>로그인 실패</h2>' + '<a href="/login">다시 로그인하기</a>');
                } else {
                    $('#login_result').append('<h2>로그인 성공</h2>');
                    setTimeout(function () {
                        //로그인성공하면 3초뒤에 첫페이지 이동
                        location.href = '/' + getCookie('sub');
                        document.cookie = 'sub=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
                    }, 3000);
                    //시간을 과거로 돌려 만료시킨다.
                }
            });

            // document.write(isLogin + ' ' + id);
        </script>
        <style>
            body {
                background: #ef7a7a;
                height: 100vh;
            }
            #login_result {
                width: 500px;
                color: #fff;
                text-align: center;
                position: relative;
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
            }
            #login_result h2 {
                font-size: 30px;
                font-weight: 800;
            }
            #login_result a {
                color: #fff;
            }
        </style>
    </head>
    <body>
        <div id="login_result"></div>
    </body>
</html>
